<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mortgage Calculator</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>

<body>
    <main class="calculator-container">
        <header class="header">
            <div class="header-content">
                <div class="brand">
                    <h1> Mortgage <span class="accent">Pro</span></h1>
                    <p class="slogan">Precision Mortgage Intelligence for Australian Homeowners | Developed by
                        NSWInsights</p>
                </div>
                <div class="header-actions">
                    <button id="reset-btn" class="reset-btn">‚Ü∫ Reset Simulation</button>
                </div>
            </div>
        </header>

        <div class="layout-grid">
            <!-- Left Column: Inputs -->
            <aside class="sidebar">

                <!-- Section 1: Initial Loan Setup -->
                <section class="control-panel">
                    <h3>üìã Initial Loan Setup</h3>

                    <div class="input-row">
                        <div class="input-group">
                            <label>Loan Start Date</label>
                            <input type="date" id="loan-start-date">
                        </div>
                    </div>

                    <div class="input-group">
                        <label>Loan Amount</label>
                        <div class="input-wrapper">
                            <span class="currency-symbol">$</span>
                            <input type="number" id="loan-amount" value="375000">
                        </div>
                    </div>

                    <div class="input-group">
                        <label>Interest Rate</label>
                        <div class="input-wrapper">
                            <input type="number" id="interest-rate" value="5.29" step="0.01">
                            <span class="unit-symbol">%</span>
                        </div>
                    </div>

                    <div class="input-row two-col">
                        <div class="input-group">
                            <label>Term (Years)</label>
                            <input type="number" id="loan-term-years" value="25" min="0" max="40">
                        </div>
                        <div class="input-group">
                            <label>Term (Months)</label>
                            <input type="number" id="loan-term-months" value="0" min="0" max="11">
                        </div>
                    </div>

                    <div class="input-group">
                        <label>Repayment Frequency</label>
                        <div class="select-wrapper">
                            <select id="payment-frequency">
                                <option value="monthly">Monthly</option>
                                <option value="fortnightly">Fortnightly</option>
                                <option value="weekly">Weekly</option>
                            </select>
                        </div>
                    </div>

                    <div class="input-group">
                        <label>First Repayment Date</label>
                        <input type="date" id="repayment-start-date">
                    </div>

                    <div class="input-group">
                        <label>Rate Type</label>
                        <div class="toggle-group">
                            <button type="button" id="rate-variable" class="toggle-btn active">Variable</button>
                            <button type="button" id="rate-fixed" class="toggle-btn">Fixed</button>
                            <button type="button" id="rate-split" class="toggle-btn">Split Loan</button>
                            <button type="button" id="rate-interest-only" class="toggle-btn">Interest Only</button>
                        </div>
                    </div>

                    <!-- Fixed Rate Options (Hidden by default) -->
                    <div id="fixed-options" style="display:none" class="conditional-section">
                        <div class="input-row two-col">
                            <div class="input-group">
                                <label>Fixed for (Years)</label>
                                <div class="select-wrapper">
                                    <select id="fixed-years">
                                        <option value="1">1 Year</option>
                                        <option value="2">2 Years</option>
                                        <option value="3" selected>3 Years</option>
                                        <option value="4">4 Years</option>
                                        <option value="5">5 Years</option>
                                    </select>
                                </div>
                            </div>
                            <div class="input-group">
                                <label>Fixed Rate</label>
                                <div class="input-wrapper">
                                    <input type="number" id="fixed-rate-val" value="5.99" step="0.01">
                                    <span class="unit-symbol">%</span>
                                </div>
                            </div>
                        </div>
                        <div class="input-group">
                            <label>Fixed Start Date</label>
                            <input type="date" id="fixed-start-date">
                        </div>
                    </div>

                    <!-- Interest Only Options (Hidden by default) -->
                    <div id="interest-only-options" style="display:none" class="conditional-section">
                        <div class="input-row two-col">
                            <div class="input-group">
                                <label>IO Term (Years)</label>
                                <div class="select-wrapper">
                                    <select id="io-years">
                                        <option value="1">1 Year</option>
                                        <option value="2">2 Years</option>
                                        <option value="3" selected>3 Years</option>
                                        <option value="4">4 Years</option>
                                        <option value="5">5 Years</option>
                                    </select>
                                </div>
                            </div>
                            <div class="input-group">
                                <label>IO Rate</label>
                                <div class="input-wrapper">
                                    <input type="number" id="io-rate-val" value="6.19" step="0.01">
                                    <span class="unit-symbol">%</span>
                                </div>
                            </div>
                        </div>
                        <div class="input-group">
                            <label>IO Start Date</label>
                            <input type="date" id="io-start-date">
                        </div>
                    </div>

                    <!-- Split Loan Options (Hidden by default) -->
                    <div id="split-options" style="display:none" class="conditional-section">
                        <div class="input-group">
                            <label>Split Type</label>
                            <div class="toggle-group two-col">
                                <button type="button" id="split-type-percent"
                                    class="toggle-btn active">Percentage</button>
                                <button type="button" id="split-type-value" class="toggle-btn">Value</button>
                            </div>
                        </div>
                        <div class="input-row two-col">
                            <div class="input-group" id="split-percent-group">
                                <label>Fixed Rate Portion</label>
                                <div class="input-wrapper">
                                    <input type="number" id="split-percent" value="50" min="1" max="99" step="1">
                                    <span class="unit-symbol">%</span>
                                </div>
                            </div>
                            <div class="input-group" id="split-value-group" style="display:none">
                                <label>Fixed Rate Amount</label>
                                <div class="input-wrapper">
                                    <span class="currency-symbol">$</span>
                                    <input type="number" id="split-value" value="100000">
                                </div>
                            </div>
                            <div class="input-group">
                                <label>Fixed Term (Years)</label>
                                <div class="select-wrapper">
                                    <select id="split-years">
                                        <option value="1">1 Year</option>
                                        <option value="2">2 Years</option>
                                        <option value="3" selected>3 Years</option>
                                        <option value="4">4 Years</option>
                                        <option value="5">5 Years</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="input-row two-col">
                            <div class="input-group">
                                <label>Fixed Rate</label>
                                <div class="input-wrapper">
                                    <input type="number" id="split-rate" value="5.99" step="0.01">
                                    <span class="unit-symbol">%</span>
                                </div>
                            </div>
                            <div class="input-group">
                                <label>Split Start Date</label>
                                <input type="date" id="split-start-date">
                            </div>
                        </div>
                        <div class="input-group"
                            style="background: #f7fafc; padding: 12px; border-radius: 8px; margin-top: 8px;">
                            <label style="font-size: 0.85rem; color: #4a5568; margin-bottom: 4px;">Split
                                Breakdown</label>
                            <div id="split-breakdown" style="font-size: 0.9rem; color: #2d3748;">
                                <div>Fixed: <span id="split-fixed-amount">50%</span></div>
                                <div>Variable: <span id="split-variable-amount">50%</span></div>
                            </div>
                        </div>
                    </div>

                    <div class="input-group highlight-group">
                        <label>Repayment Amount <small>(auto-calculated, override if needed)</small></label>
                        <div id="repayment-display">
                            <div class="input-wrapper">
                                <span class="currency-symbol">$</span>
                                <input type="number" id="repayment-override" placeholder="Auto">
                            </div>
                            <div id="split-repayment-breakdown"
                                style="display:none; margin-top: 8px; font-size: 0.85rem; color: #4a5568; background: #f7fafc; padding: 8px; border-radius: 6px;">
                                <div>Fixed Repayment: <strong id="split-fixed-repayment">$0</strong></div>
                                <div>Variable Repayment: <strong id="split-variable-repayment">$0</strong></div>
                                <div style="margin-top: 4px; padding-top: 4px; border-top: 1px solid #e2e8f0;">Total:
                                    <strong id="split-total-repayment">$0</strong>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>


                <!-- Section 2: Initial Liquidity -->
                <section class="control-panel">
                    <h3>üí∞ Initial Liquidity</h3>

                    <div class="input-group">
                        <label>Initial Offset Balance</label>
                        <div class="input-wrapper">
                            <span class="currency-symbol">$</span>
                            <input type="number" id="offset-balance" value="100000">
                        </div>
                    </div>

                    <div class="input-group">
                        <label>Initial Redraw Balance</label>
                        <div class="input-wrapper">
                            <span class="currency-symbol">$</span>
                            <input type="number" id="redraw-balance" value="200">
                        </div>
                    </div>

                    <div class="input-group">
                        <label>Mortgage Fees <small>(Yearly Mortgage Fees)</small></label>
                        <div class="input-wrapper">
                            <span class="currency-symbol">$</span>
                            <input type="number" id="mortgage-fees" value="299">
                        </div>
                    </div>
                </section>

                <!-- Section 3: Property Details -->
                <section class="control-panel">
                    <h3>üè† Property Details</h3>

                    <div class="input-group">
                        <label>Property Value</label>
                        <div class="input-wrapper">
                            <span class="currency-symbol">$</span>
                            <input type="number" id="property-value" value="500000">
                        </div>
                    </div>

                    <div class="input-group">
                        <label>Annual Growth Rate</label>
                        <div class="input-wrapper">
                            <input type="number" id="property-growth" value="5.0" step="0.1">
                            <span class="unit-symbol">%</span>
                        </div>
                    </div>
                </section>



                <!-- Section 4: Future Interventions -->
                <section class="control-panel">
                    <h3>üìÖ Future Changes</h3>
                    <div class="intervention-form">
                        <div class="input-group">
                            <label>Date</label>
                            <input type="date" id="int-date">
                        </div>
                        <div class="input-row two-col">
                            <div class="input-group">
                                <label>Type</label>
                                <select id="int-type">
                                    <option value="lump_sum">Lump Sum</option>
                                    <option value="rate_change">Rate Change</option>
                                    <option value="offset_add">Offset Add</option>
                                    <option value="redraw_add">Redraw Add</option>
                                </select>
                            </div>
                            <div class="input-group">
                                <label>Recurrence</label>
                                <select id="int-recurrence">
                                    <option value="once">One-off</option>
                                    <option value="weekly">Weekly</option>
                                    <option value="fortnightly">Fortnightly</option>
                                    <option value="monthly">Monthly</option>
                                    <option value="yearly">Yearly</option>
                                </select>
                            </div>
                        </div>
                        <div class="input-row">
                            <div class="input-group" style="flex:1">
                                <label>Amount / Rate</label>
                                <input type="number" id="int-value" placeholder="Enter value">
                            </div>
                            <button id="add-intervention-btn" class="add-btn">+ Add</button>
                        </div>
                    </div>
                    <div id="intervention-list" class="intervention-list"></div>
                </section>

                <!-- Section 5: Refinance -->
                <section class="control-panel">
                    <h3>üîÑ Refinance</h3>

                    <div class="input-group">
                        <label>Enable Refinance</label>
                        <div class="toggle-group">
                            <button type="button" id="refinance-toggle-off" class="toggle-btn active">Off</button>
                            <button type="button" id="refinance-toggle-on" class="toggle-btn">On</button>
                        </div>
                    </div>

                    <div id="refinance-options" style="display:none" class="conditional-section">
                        <div class="input-group">
                            <label>Refinance Start Date <small>(Must be after Loan Start)</small></label>
                            <input type="date" id="refinance-date">
                        </div>

                        <div class="input-group">
                            <label>Additional Cash Out</label>
                            <div class="input-wrapper">
                                <span class="currency-symbol">$</span>
                                <input type="number" id="refinance-amount" value="0">
                            </div>
                        </div>

                        <div class="input-row two-col">
                            <div class="input-group">
                                <label>New Term (Years)</label>
                                <input type="number" id="refinance-term-years" value="30" min="1" max="40">
                            </div>
                            <div class="input-group">
                                <label>New Rate</label>
                                <div class="input-wrapper">
                                    <input type="number" id="refinance-rate" value="5.50" step="0.01">
                                    <span class="unit-symbol">%</span>
                                </div>
                            </div>
                        </div>

                        <div class="input-group">
                            <label>New Rate Type</label>
                            <div class="select-wrapper">
                                <select id="refinance-type">
                                    <option value="variable">Variable</option>
                                    <option value="fixed">Fixed</option>
                                    <option value="interest_only">Interest Only</option>
                                </select>
                            </div>
                        </div>

                        <!-- Refinance Sub-options (Fixed) -->
                        <div id="refinance-fixed-details" style="display:none; margin-top:8px;">
                            <div class="input-row two-col">
                                <div class="input-group">
                                    <label>Fixed Term (Years)</label>
                                    <input type="number" id="refinance-fixed-years" value="3" min="1" max="5">
                                </div>
                            </div>
                        </div>

                        <!-- Refinance Sub-options (IO) -->
                        <div id="refinance-io-details" style="display:none; margin-top:8px;">
                            <div class="input-row two-col">
                                <div class="input-group">
                                    <label>IO Term (Years)</label>
                                    <input type="number" id="refinance-io-years" value="3" min="1" max="5">
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            </aside>

            <!-- Right Column: Results & Visuals -->
            <section class="results-area">
                <div class="summary-cards">
                    <div class="card">
                        <h2>Total Interest</h2>
                        <div class="big-stat" id="total-interest">...</div>
                    </div>
                    <div class="card">
                        <h2>Total Repayment</h2>
                        <div class="big-stat" id="total-repayment">...</div>
                    </div>
                    <div class="card">
                        <h2>Interest Saved</h2>
                        <div class="big-stat positive" id="interest-saved">...</div>
                    </div>
                    <div class="card">
                        <h2>Time Saved</h2>
                        <div class="big-stat" id="time-saved">-</div>
                    </div>
                    <div class="card">
                        <h2>Loan Neutrality</h2>
                        <div class="big-stat" id="neutrality-date">-</div>
                        <div class="stat-label">Offset = Loan</div>
                    </div>
                    <div class="card">
                        <h2>Loan End Date</h2>
                        <div class="big-stat" id="loan-end-date">...</div>
                    </div>
                </div>



                <div class="chart-section">
                    <div class="chart-header">
                        <h3>Loan Progress</h3>
                        <div class="chart-toggle">
                            <div class="toggle-group">
                                <button id="btn-chart-standard" class="toggle-btn active">Standard</button>
                                <button id="btn-chart-yearly" class="toggle-btn">Yearly Breakdown</button>
                            </div>
                        </div>
                    </div>
                    <div class="chart-container">
                        <canvas id="loanChart"></canvas>
                    </div>
                </div>

                <div class="chart-section">
                    <div class="chart-header">
                        <h3>Property Equity & LVR Milestones</h3>
                    </div>
                    <div class="chart-container">
                        <canvas id="equityChart"></canvas>
                    </div>
                </div>

                <div class="ledger-container">
                    <div class="ledger-header">
                        <h3>Repayment Ledger</h3>
                        <div class="ledger-toggle">
                            <div class="toggle-group">
                                <button id="btn-ledger-standard" class="toggle-btn active">Standard</button>
                                <button id="btn-ledger-monthly" class="toggle-btn">Monthly</button>
                                <button id="btn-ledger-yearly" class="toggle-btn">Yearly</button>
                            </div>
                        </div>
                    </div>
                    <div class="table-wrapper">
                        <table id="ledger-table">
                            <thead>
                                <tr>
                                    <th>Period</th>
                                    <th>Date</th>
                                    <th>Rate</th>
                                    <th>Repayment</th>
                                    <th>Interest</th>
                                    <th>Principal</th>
                                    <th>Offset</th>
                                    <th>Redraw</th>
                                    <th>Balance</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>

                </div>


            </section>
        </div>



        <div class="info-area">
            <div class="faq-section">
                <button id="faq-toggle" class="faq-header">
                    <h3>üìö Guide & Information</h3>
                    <span class="arrow">‚ñº</span>
                </button>
                <div id="faq-content" class="faq-content" style="display:none">
                    <div class="faq-item">
                        <h4>Offset Account</h4>
                        <p>An account linked to your loan where the balance is offset against your loan balance. You
                            save interest because interest is calculated on the (Loan Balance - Offset Balance).</p>
                    </div>
                    <div class="faq-item">
                        <h4>Redraw Facility</h4>
                        <p>Allows you to access extra repayments you've made on your loan. Unlike an offset account,
                            this is money you've already paid into the loan but can withdraw if needed.</p>
                    </div>
                    <div class="faq-item">
                        <h4>Split Loan</h4>
                        <p>Divides your loan into two parts: one with a fixed interest rate and one with a variable
                            rate. This gives you the certainty of fixed repayments on a portion of your debt while
                            keeping the flexibility of a variable loan for the rest.</p>
                    </div>
                    <div class="faq-item">
                        <h4>Interest Only</h4>
                        <p>For a set period (usually 1-5 years), your repayments only cover the interest on the loan,
                            not the principal. Your loan balance (principal) remains the same during this period.</p>
                    </div>
                    <div class="faq-item">
                        <h4>Effective Rate</h4>
                        <p>The actual rate you are paying interest on for your variable portion, or the weighted average
                            rate if you have a split loan.</p>
                    </div>
                </div>
            </div>

            <script data-name="BMC-Widget" data-cfasync="false"
                src="https://cdnjs.buymeacoffee.com/1.0.0/widget.prod.min.js" data-id="nswhscinsir"
                data-description="Support me on Buy me a coffee!" data-message="Found it useful? Buy me an Espresso ‚òï"
                data-color="#40DCA5" data-position="Right" data-x_margin="18" data-y_margin="18">
                </script>



            <div class="disclaimer-section">
                <h3>‚ö†Ô∏è Disclaimer</h3>
                <p>This tool is for educational purposes only and should not be treated as financial advice. The results
                    provided are
                    estimates based on the information you provide and may not be accurate. You should seek your own
                    independent financial advice before making any decisions.</p>
            </div>
        </div>
    </main>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="script.js"></script>
</body>

</html>